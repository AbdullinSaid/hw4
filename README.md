Абдуллин Саид Маратович БПИ218

5. Задача об обедающих философах. Пять философов сидят возле круглого
стола. Они проводят жизнь, чередуя приемы пищи и размышления. В центре
стола находится большое блюдо спагетти. Спагетти длинные и запутанные,
философам тяжело управляться с ними, поэтому каждый из них, что бы
съесть порцию, должен пользоваться двумя вилками. К несчастью, философам дали только пять вилок. Между каждой парой философов лежит одна
вилка, поэтому эти высококультурные и предельно вежливые люди договорились, что каждый будет пользоваться только теми вилками, которые лежат
рядом с ним (слева и справа). Написать многопоточную программу, моделирующую поведение философов с помощью семафоров. Программа должна
избегать фатальной ситуации, в которой все философы голодны, но ни один
из них не может взять обе вилки (например, каждый из философов держит по
одной вилки и не хочет отдавать ее). Решение должно быть симметричным,
то есть все потоки-философы должны выполнять один и тот же код

Во входные данные я решил поместить только 1 число - число философов(т.е. их может быть не только 5, а от 3 до 100).
Реализация задачи состоит в наличии ограничения на то, что только один философ может быть в процессе набора вилок, поэтому не будет возникать дедлока, т.к. если тот,
кто сейчас берет вилки не может взять их, то он будет ждать, пока нужные едящие не положат вилки, а новых едящих или набирающих вилки из-за мютекса на набор не будет.
По сути, тут используется схема клиентов и сервера, т.к. клиенты(т.е. философы) ждут, пока им будет разрешено начать брать вилки общим "сервером".

Чтобы было чуть более понятно, стоит привести конкретный цикл одного философа.

1)Взять общий лок на взятие вилок и объявить о начале трапезы.
2)Дождаться левой вилки
3)Подождать(добавлено для наглядности, что одновременно два философа не находятся в состоянии набора и нет дедлоков)
4)Дождаться правой вилки
5)Снять общий лок
6)Снять локи на левую и правую вилки
7)Отдохнуть

Пример консольного вывода:
1 philosopher started dinner
1 philosopher ended dinner after 82 ms
1 philosopher put back forks
3 philosopher started dinner
1 philosopher took rest for 13 ms
3 philosopher ended dinner after 245 ms
3 philosopher put back forks
2 philosopher started dinner
3 philosopher took rest for 40 ms
2 philosopher ended dinner after 163 ms
2 philosopher put back forks
2 philosopher took rest for 27 ms
4 philosopher started dinner
4 philosopher ended dinner after 326 ms
4 philosopher put back forks
4 philosopher took rest for 54 ms
5 philosopher started dinner
5 philosopher ended dinner after 408 ms
5 philosopher put back forks
5 philosopher took rest for 67 ms

В итоге работа на 5-6 баллов(6 если учитывать рандомизацию времени действий для каждого философа(из-за добавления seed получается, что у философов будут разные последовательности случайных чисел, а не одинаковые, как при простом rand()))
